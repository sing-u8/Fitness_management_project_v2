<div
    *ngIf="true"
    class="l-center-list-item"
    [class.border-red]="headerState == 'invite'"
    [class.border-gray]="headerState == 'subscribeFailed' || headerState == 'expired' || headerState == 'freeTrialEnd'"
>
    <div
        *ngIf="headerState != 'normal' && headerState != 'needToBuy'"
        class="center-list-item-header"
        [class.bg-red]="headerState == 'invite'"
    >
        <span *ngIf="headerState == 'invite'" class="header-text">ğŸ’Œ ìƒˆë¡œìš´ ì´ˆëŒ€ê°€ ë„ì°©í–ˆì–´ìš”.</span>
        <div *ngIf="headerState == 'subscribeFailed'" class="d-flex align-items-center">
            <span class="header-text">ìë™ ê²°ì œì— ì‹¤íŒ¨í–ˆì–´ìš”! ê²°ì œ ìˆ˜ë‹¨ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.</span>
            <rwa-text-button [showUnderLine]="true" (onClick)="showDetailModal = true">
                <span class="header-text-button">ìì„¸íˆ ë³´ê¸°</span>
            </rwa-text-button>
        </div>
        <div *ngIf="headerState == 'freeTrialEnd'" class="d-flex align-items-center">
            <span class="header-text">ë¬´ë£Œ ì²´í—˜ì´ ì¢…ë£Œë˜ì—ˆì–´ìš”! ì´ìš©ê¶Œì„ êµ¬ë§¤í•´ ì´ì–´ì„œ ì‚¬ìš©í•´ ë³´ì„¸ìš”.</span>
            <rwa-text-button [showUnderLine]="true" (onClick)="showDetailModal = true">
                <span class="header-text-button">ìì„¸íˆ ë³´ê¸°</span>
            </rwa-text-button>
        </div>
        <div *ngIf="headerState == 'expired'" class="d-flex align-items-center">
            <span class="header-text">ì´ìš©ê¶Œì´ ë§Œë£Œë˜ì—ˆì–´ìš”! ìƒˆ ì´ìš©ê¶Œì„ êµ¬ë§¤í•´ ì´ì–´ì„œ ì‚¬ìš©í•´ ë³´ì„¸ìš”.</span>
            <rwa-text-button [showUnderLine]="true" (onClick)="showDetailModal = true">
                <span class="header-text-button">ìì„¸íˆ ë³´ê¸°</span>
            </rwa-text-button>
        </div>
    </div>

    <div
        class="center-list-item"
        [class.header-exist]="
            headerState == 'freeTrialEnd' || headerState == 'expired' || headerState == 'subscribeFailed'
        "
    >
        <rwa-icon-ghost-button
            *ngIf="!(headerState == 'freeTrialEnd' || headerState == 'expired')"
            [sizeType]="'md'"
            class="center-setting-icon"
            (onClick)="onSetCenter.emit(center)"
        >
            <ng-template iconGhostBtIdleContent>
                <div class="gear-icon"></div>
            </ng-template>
        </rwa-icon-ghost-button>

        <div
            class="center-list-item__name"
            [class.expired-opacity]="badgeState == 'freeTrialEnd' || badgeState == 'expired'"
        >
            <span class="center-name line-ellipsis-one" [class.badge-exist]="badgeState != 'normal'">
                {{ center.name }}
            </span>
            <rwa-badge
                *ngIf="badgeState != 'normal'"
                [color]="badgeStateObj[badgeState].color"
                [bgColor]="badgeStateObj[badgeState].bgColor"
            >
                {{
                    badgeState == 'expirationExpected' || badgeState == 'freeTrialEndExpected'
                        ? badgeStateObj[badgeState]['text1'] +
                          badgeStateObj[badgeState]['day'] +
                          badgeStateObj[badgeState]['text2']
                        : badgeStateObj[badgeState]['text']
                }}
            </rwa-badge>
        </div>

        <div
            class="center-list-item__body"
            [class.invite-body]="headerState == 'invite'"
            [class.expired-opacity]="badgeState == 'freeTrialEnd' || badgeState == 'expired'"
        >
            <div class="center-photo" [class.empty]="!!!center.picture">
                <img
                    *ngIf="!!!center.picture"
                    [src]="'/assets/icons/etc/muscle.svg'"
                    class="default-image"
                    loading="lazy"
                    alt="muscle.svg"
                />
                <img
                    *ngIf="!!center.picture"
                    [src]="center.picture"
                    class="center-image"
                    loading="lazy"
                    alt="user-picture.png"
                />
            </div>
            <div class="center-info">
                <div class="center-info-item" *ngIf="headerState != 'invite'">
                    <div class="instructor-icon"></div>
                    <span>{{ center.role_name }}</span>
                </div>
                <div class="center-info-item">
                    <div class="phone-number-icon"></div>
                    <span>{{ center.phone_number | phoneNumber }}</span>
                </div>
                <div class="center-info-item">
                    <div class="address-icon"></div>
                    <span>{{ center.road_full_addr + ', ' + center.addr_detail }}</span>
                </div>
            </div>
        </div>

        <div class="center-list-item__button">
            <ng-container
                *ngIf="headerState == 'normal' || headerState == 'needToBuy' || headerState == 'subscribeFailed'"
            >
                <rwa-ghost-button class="button" padding="7.5px 14.62px 5.5px" (onClick)="goCenter()">
                    <ng-template gbtIdleContent>
                        <span class="button-text">ì…ì¥í•˜ê¸°</span>
                    </ng-template>
                </rwa-ghost-button>
            </ng-container>

            <ng-container *ngIf="headerState == 'invite'">
                <rwa-button
                    class="button"
                    padding="7.5px 16.32px 5.5px"
                    [fontColor]="'var(--gray-90)'"
                    [bgColor]="'var(--white)'"
                    [hoverBgColor]="'var(--gray-30)'"
                    [loadingColor]="'var(--font-color)'"
                    (onClick)="showRefuseInviteModal = true"
                >
                    <ng-template btIdleContent>
                        <span class="button-text">ê±°ì ˆ</span>
                    </ng-template>
                </rwa-button>
                <rwa-button class="button" padding="7.5px 16.32px 5.5px" (onClick)="showAgreeInviteModal = true">
                    <ng-template btIdleContent>
                        <span class="button-text white-text">ì´ˆëŒ€ ìˆ˜ë½</span>
                    </ng-template>
                </rwa-button>
            </ng-container>

            <rwa-button
                *ngIf="headerState == 'needToBuy' || headerState == 'expired' || headerState == 'freeTrialEnd'"
                class="button-margin button"
                padding="7.5px 16.32px 5.5px"
                [bgColor]="'#2F2D2D'"
                [hoverBgColor]="'#141517'"
                (onClick)="goPayment()"
            >
                <ng-template btIdleContent>
                    <span class="button-text white-text">ì´ìš©ê¶Œ êµ¬ë§¤</span>
                </ng-template>
            </rwa-button>
            <rwa-button
                *ngIf="headerState == 'subscribeFailed'"
                class="button-margin button"
                padding="7.5px 16.32px 5.5px"
                [bgColor]="'#2F2D2D'"
                [hoverBgColor]="'#141517'"
            >
                <ng-template btIdleContent>
                    <span class="button-text white-text">ê²°ì œ ìˆ˜ë‹¨ ê´€ë¦¬</span>
                </ng-template>
            </rwa-button>
        </div>
    </div>
</div>

<rwa-vacant-modal
    [(visible)]="showDetailModal"
    [blockClickOutside]="true"
    [width]="'345px'"
    [padding]="'30px 25px 25px'"
>
    <div class="l-detail-modal">
        <div class="error-icon" *ngIf="detailModalMode == 'subscriptionFailed'"></div>
        <div class="title">
            {{ detailInfo.title }}
        </div>
        <div class="center-info">
            <div class="center-info-item">
                <div class="center-info-item__title">ì„¼í„° ì´ë¦„</div>
                <div class="center-info-item__content line-ellipsis-one">{{ center.name }}</div>
            </div>
            <div class="center-info-item" *ngIf="detailModalMode != 'subscriptionFailed'">
                <div class="center-info-item__title">
                    {{ detailModalMode == 'freeTrial' ? 'ë¬´ë£Œ ì²´í—˜ ê¸°ê°„' : 'ì´ìš©ê¶Œ ì´ìš© ê¸°ê°„' }}
                </div>
                <div class="center-info-item__content">
                    {{ center.start_date | dateFormat : 'YYë…„ MMì›” DDì¼' }} ~
                    {{ center.end_date | dateFormat : 'YYë…„ MMì›” DDì¼' }}
                </div>
            </div>
        </div>
        <div class="center-info-desc">
            <div class="center-info-desc__item" *ngFor="let item of detailInfo.desc">
                {{ item }}
            </div>
        </div>
        <div class="l-button">
            <rwa-button
                [padding]="'9px 25px 7px'"
                [height]="'45px'"
                [fontColor]="'var(--gray-90)'"
                [bgColor]="'var(--white)'"
                [hoverBgColor]="'var(--gray-30)'"
                [loadingColor]="'var(--font-color)'"
                (onClick)="showDetailModal = false"
            >
                <ng-template btIdleContent><span class="button-text">í™•ì¸</span></ng-template>
            </rwa-button>
            <rwa-button
                *ngIf="detailModalMode != 'subscriptionFailed'"
                [padding]="'9px 25px 7px'"
                [height]="'45px'"
                (onClick)="goPayment()"
            >
                <ng-template btIdleContent><span class="white-button-text">ì´ìš©ê¶Œ êµ¬ë§¤</span></ng-template>
            </rwa-button>
            <rwa-button
                *ngIf="detailModalMode == 'subscriptionFailed'"
                [padding]="'9px 25px 7px'"
                [height]="'45px'"
                (onClick)="(false)"
            >
                <ng-template btIdleContent><span class="white-button-text">ê²°ì œ ìˆ˜ë‹¨ ê´€ë¦¬</span></ng-template>
            </rwa-button>
        </div>
    </div>
</rwa-vacant-modal>

<rwa-vacant-modal
    [(visible)]="showAgreeInviteModal"
    [blockClickOutside]="true"
    [width]="'345px'"
    [padding]="'30px 25px 25px'"
>
    <div class="l-invite-modal">
        <div class="invite-title">ì´ˆëŒ€ë¥¼ ìˆ˜ë½í•˜ì‹œê² ì–´ìš”?</div>
        <div class="invite-desc">ì´ˆëŒ€ë¥¼ ìˆ˜ë½í•˜ë©´ ì„¼í„°ì— ì…ì¥í•  ìˆ˜ ìˆì–´ìš”.</div>
        <div class="invite-content">
            <div class="invite-content-item__title">ì„¼í„° ì´ë¦„</div>
            <div class="invite-content-item__content">
                {{ center.name }}
            </div>
        </div>
        <div class="l-button">
            <rwa-button
                [width]="'80px'"
                [padding]="'9px 25px 7px'"
                [height]="'45px'"
                [fontColor]="'var(--gray-90)'"
                [bgColor]="'var(--white)'"
                [hoverBgColor]="'var(--gray-30)'"
                [loadingColor]="'var(--font-color)'"
                (onClick)="showAgreeInviteModal = false"
            >
                <ng-template btIdleContent><span class="button-text">ì·¨ì†Œ</span></ng-template>
            </rwa-button>
            <rwa-button
                [status]="agreeLoading"
                [padding]="'9px 25px 7px'"
                [height]="'45px'"
                (onClick)="onAgreeCenter()"
            >
                <ng-template btIdleContent><span class="white-button-text">ìˆ˜ë½í•˜ê¸°</span></ng-template>
                <ng-template btPendingContent><span class="white-button-text">ìˆ˜ë½í•˜ê¸°</span></ng-template>
            </rwa-button>
        </div>
    </div>
</rwa-vacant-modal>

<rwa-vacant-modal
    [(visible)]="showRefuseInviteModal"
    [blockClickOutside]="true"
    [width]="'345px'"
    [padding]="'30px 25px 25px'"
>
    <div class="l-invite-modal">
        <div class="invite-title">ì´ˆëŒ€ë¥¼ ê±°ì ˆí•˜ì‹œê² ì–´ìš”?</div>
        <div class="invite-desc">
            ì´ˆëŒ€ë¥¼ ê±°ì ˆí•˜ë©´ ì„¼í„°ì— ì…ì¥í•  ìˆ˜ ì—†ì–´ìš”.<br />
            ê±°ì ˆí•œ ì„¼í„°ì˜ ì…ì¥ì„ ì›í•  ê²½ìš°, ì„¼í„°ë¡œë¶€í„°<br />
            ë‹¤ì‹œ ì´ˆëŒ€ ìš”ì²­ì„ ë°›ì•„ì•¼ í•´ìš”.
        </div>
        <div class="invite-content">
            <div class="invite-content-item__title">ì„¼í„° ì´ë¦„</div>
            <div class="invite-content-item__content">
                {{ center.name }}
            </div>
        </div>
        <div class="l-button">
            <rwa-button
                [width]="'80px'"
                [padding]="'9px 25px 7px'"
                [height]="'45px'"
                [fontColor]="'var(--gray-90)'"
                [bgColor]="'var(--white)'"
                [hoverBgColor]="'var(--gray-30)'"
                [loadingColor]="'var(--font-color)'"
                (onClick)="showRefuseInviteModal = false"
            >
                <ng-template btIdleContent><span class="button-text">ì·¨ì†Œ</span></ng-template>
            </rwa-button>
            <rwa-button
                [status]="agreeLoading"
                [padding]="'9px 25px 7px'"
                [height]="'45px'"
                (onClick)="onRefuseCenter()"
            >
                <ng-template btIdleContent><span class="white-button-text">ê±°ì ˆí•˜ê¸°</span></ng-template>
                <ng-template btPendingContent><span class="white-button-text">ê±°ì ˆí•˜ê¸°</span></ng-template>
            </rwa-button>
        </div>
    </div>
</rwa-vacant-modal>
